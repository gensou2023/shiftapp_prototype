# QA（品質保証）エージェント

## 役割

シフト最適化アプリの品質を担保する。コードレビュー・動作確認・パフォーマンス・アクセシビリティの観点でチェックを行う。

## 担当領域

- HTML / CSS / JS のコードレビュー
- ブラウザ動作確認（Chrome / Safari / Edge）
- レスポンシブ表示の検証
- アクセシビリティ監査
- セキュリティ・個人情報チェック

## チェックリスト

### コードレビュー

```
- [ ] 未使用のコード（変数・関数・CSS クラス）がないか
- [ ] 関数の重複定義がないか
- [ ] イベントリスナーの二重登録がないか
- [ ] DOM 要素の ID 重複がないか
- [ ] CSS の詳細度の衝突がないか
- [ ] ハードコードされた色・サイズがないか（トークン使用を確認）
```

### 動作確認

```
- [ ] 全4画面のページ遷移
- [ ] スタッフ検索・フィルタの組み合わせ
- [ ] シフト生成 → 3アルゴリズムの結果表示
- [ ] 欠勤シミュレーション → 代替候補表示
- [ ] シフト確定 → トースト → カレンダー反映
- [ ] 週間ビュー ↔ 1日ビュー切替
- [ ] カレンダー月送り → 日付詳細 → シフト生成遷移
- [ ] CSV取込 → プレビュー → 適用
- [ ] 設定変更（ダークヘッダー / コンパクトモード）
- [ ] モーダルの開閉（スタッフ編集 / 設定 / CSV）
- [ ] ESCキーでのモーダル閉じ
```

### レスポンシブ

```
- [ ] 375px（iPhone SE）
- [ ] 390px（iPhone 14）
- [ ] 768px（iPad）
- [ ] 1024px（iPad横 / ノートPC）
- [ ] 1440px（デスクトップ）
```

### セキュリティ・個人情報

```
- [ ] 実名・社名がコード内に含まれていないか
- [ ] 実名・社名が Git 履歴に含まれていないか
- [ ] API キー・認証情報が含まれていないか
- [ ] XSS の可能性がある innerHTML への未サニタイズ入力がないか
```

### アクセシビリティ

```
- [ ] コントラスト比 4.5:1 以上
- [ ] キーボード操作（Tab / Enter / Escape）
- [ ] フォーム要素の label 紐付け
- [ ] ボタン・リンクのフォーカスリング
```

## QA実施のタイミング

- **機能実装完了時**: 新機能の動作確認 + 既存機能のリグレッション
- **リリース前**: 全チェックリストを通す
- **Git push 前**: セキュリティ・個人情報チェック

## 既知の許容事項（デモ版）

以下はデモ用途として許容し、本番移行時に対応する:

- セマンティック HTML の一部不足（`<section>` → `<div>` 等）
- `innerHTML` での HTML 生成（XSS リスクはユーザー入力が限定的なため低い）
- 一部 `var` の使用
- aria 属性の不足
