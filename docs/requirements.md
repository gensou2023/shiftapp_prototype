# シフト最適化デモ — 要件定義書

## 1. 背景・目的

### 背景
- クライアント（クライアント）は大阪で倉庫業務を運営
- アルバイトメンバーのシフトを手動で管理している（3ヶ月分のシフト表あり）
- AI を活用してシフト自動生成を実現したい

### 目的
- **デモ**: 「これくらいならできる」を営業担当（営業担当）経由で見せる
- **プラン提示**: 松竹梅の3段階で実現方法を提案する
- **粒度**: メニュー画像生成アプリ（MenuCraft AI）のシンプル版程度

---

## 2. ユーザー

| ユーザー | 役割 | 主な操作 |
|---------|------|---------|
| 倉庫管理者 | シフト作成・管理 | 出荷量入力、シフト生成、確認・調整 |
| 倉庫リーダー | シフト確認 | 当日シフトの閲覧 |
| アルバイトスタッフ | 自分のシフト確認 | 自分の出勤日・時間の確認 |

※デモ版では**倉庫管理者**の操作に集中する。

---

## 3. データモデル

### スタッフ（Staff）

| フィールド | 型 | 説明 |
|-----------|-----|------|
| id | string | 一意のID |
| name | string | スタッフ名（**サンプル名**） |
| skillLevel | number (1-5) | 業務レベル（1:新人 〜 5:ベテラン） |
| availableDays | string[] | 出勤可能曜日 ["月","火","水"...] |
| availableTimeSlots | string[] | 出勤可能時間帯 ["早番","遅番","通し"] |
| hourlyRate | number | 時給（コスト計算用） |
| weight | number (0.5-2.0) | 重み付け（総合スコアへの貢献度） |
| note | string | 備考 |

### 出荷量スコア定義（ShipmentScore）

| フィールド | 型 | 説明 |
|-----------|-----|------|
| level | string | "軽量" / "通常" / "繁忙" / "超繁忙" |
| minScore | number | そのレベルに必要な最低スタッフスコア合計 |
| description | string | 説明 |

### シフト（Shift）

| フィールド | 型 | 説明 |
|-----------|-----|------|
| date | string | 日付 (YYYY-MM-DD) |
| timeSlot | string | "早番" / "遅番" / "通し" |
| staffIds | string[] | 配置スタッフのID一覧 |
| totalScore | number | 配置スタッフのスキルスコア合計 |
| shipmentLevel | string | その日の出荷量レベル |
| status | string | "確定" / "仮" / "人員不足" |

---

## 4. 機能要件（デモ版）

### 4.1 スタッフ一覧画面

- [ ] スタッフ一覧をカード or テーブル形式で表示
- [ ] スキルレベルをビジュアル表示（星 or バー）
- [ ] 出勤可能曜日・時間帯をバッジ表示
- [ ] スタッフの追加・編集（デモ用の簡易フォーム）

### 4.2 シフト自動生成画面

- [ ] 日付選択
- [ ] 出荷量レベル選択（軽量/通常/繁忙/超繁忙）
- [ ] 「シフト生成」ボタンで最適なスタッフ組み合わせを算出
- [ ] 結果表示: 配置スタッフ、スコア合計、過不足の表示
- [ ] 複数案の比較表示（余裕があれば）

### 4.3 シフトカレンダー画面

- [ ] 月間カレンダー表示
- [ ] 各日にシフト状況サマリー（人数・ステータスバッジ）
- [ ] 日付クリックでその日のシフト詳細表示

---

## 5. 非機能要件

| 項目 | 要件 |
|------|------|
| レスポンシブ | スマホ（375px〜）で閲覧可能 |
| パフォーマンス | 初回表示 1秒以内（静的HTMLのため） |
| ブラウザ対応 | Chrome, Safari, Edge（最新版） |
| アクセシビリティ | コントラスト比 4.5:1、キーボード操作可能 |
| 個人情報 | 実名データは一切含まない |

---

## 6. シフト生成アルゴリズム（簡易版）

```
入力: date, shipmentLevel
出力: 推奨スタッフリスト

1. shipmentLevel → 必要スコア (minScore) を取得
2. date の曜日に出勤可能なスタッフをフィルタ
3. フィルタされたスタッフを skillLevel × weight の降順でソート
4. 上位から順に追加し、合計スコア >= minScore になるまで繰り返す
5. 結果を返却（ステータス: 充足 or 人員不足）
```

※松プランでは、ここを機械学習ベースの最適化に置き換える。

---

## 7. 未確定事項（シフト表データ受領後に決定）

- [ ] 時間帯の区分（早番/遅番 or もっと細かい？）
- [ ] スキルレベルの定義（何をもって1〜5とするか）
- [ ] 出荷量スコアの具体的な閾値
- [ ] 週次 or 月次でシフトを組むのか
