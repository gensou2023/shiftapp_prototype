# シフト最適化デモ — プロジェクトガイド

## プロジェクト概要

倉庫業務のアルバイトシフトを AI で自動最適化するデモアプリ。
営業ツールとして「これくらいならできる」を見せ、松竹梅プランを提示するためのもの。

- **クライアント:** クライアント（大阪・倉庫業務）
- **営業担当:** 営業担当
- **デプロイ:** Cloudflare Pages（静的HTML）

## 技術スタック

| レイヤー | 技術 |
|---------|------|
| 構成 | 静的 HTML + CSS + JavaScript |
| スタイル | CSS Variables（Material Design + Primer + shadcn/ui トークン統合） |
| インタラクション | Vanilla JS or Alpine.js |
| デプロイ | Cloudflare Pages |

## デザインシステム（3システム統合）

### カラートークン（Material Design ベース）

| トークン | 用途 |
|---------|------|
| `--color-primary` | メインアクション・アクティブシフト |
| `--color-secondary` | セカンダリ・保留シフト |
| `--color-tertiary` | 完了シフト |
| `--color-error` | 警告・シフト衝突 |
| `--color-surface` | 背景 |
| `--color-on-surface` | テキスト |

### セマンティックカラー（Primer ベース）

| トークン | 用途 |
|---------|------|
| `--bg-default` | デフォルト背景 |
| `--bg-muted` | テーブルヘッダ・サブ背景 |
| `--fg-default` | テキスト |
| `--fg-muted` | サブテキスト |
| `--border-default` | ボーダー |
| `--color-success` | シフト確定 |
| `--color-warning` | 人員不足 |
| `--color-danger` | シフト衝突・エラー |

### UIパターン（shadcn/ui 参考）

| パターン | 適用箇所 |
|---------|---------|
| Card | スタッフカード・シフトサマリー |
| Data Table | シフト一覧・スタッフ一覧 |
| Badge | ステータス表示（出勤中・休み・保留） |
| Form | 出荷量入力・スタッフ登録 |
| Calendar Grid | シフトカレンダー |

### フォント

- 見出し: `Inter` or `Noto Sans JP`（ウェイト: 600-700）
- 本文: `Noto Sans JP`（ウェイト: 400-500）

## ファイル構成

```
shift-management-demo/
├── CLAUDE.md              ← このファイル
├── index.html             ← メインダッシュボード
├── style.css              ← デザイントークン + スタイル
├── app.js                 ← インタラクションロジック
├── data/
│   └── sample-shifts.json ← サンプルデータ（実名→仮名置換済み）
└── docs/
    ├── agents/            ← エージェントロール定義
    │   ├── pdo.md
    │   ├── designer.md
    │   └── frontend.md
    ├── requirements.md    ← 要件定義書
    └── plan-tiers.md      ← 松竹梅プラン
```

## デモ画面構成

| 画面 | 概要 | 状態 |
|------|------|------|
| スタッフ一覧 | 名前・スキルレベル・出勤可能日・時間帯 | TODO |
| シフト自動生成 | 出荷量入力 → 必要スコア算出 → 最適シフト提案 | TODO |
| シフトカレンダー | 月間シフト表示・週間ビュー | TODO |

## 個人情報の扱い

- **実名は使用禁止** — すべてサンプル名（田中太郎、鈴木花子 等）に置換
- 受領済みシフト表のデータ構造のみ参照し、実データはコミットしない

## コーディング規約

- セマンティック HTML（`<table>`, `<form>`, `<section>` 等を適切に使用）
- CSS 変数でデザイントークン管理（ハードコード色は禁止）
- モバイルファースト（倉庫現場 = スマホ閲覧メイン）
- 日本語 UI テキスト
- アクセシビリティ: コントラスト比 4.5:1 以上

## 開発ルール

MenuCraft AI / Cursor道場の開発経験から得たベストプラクティス。**必ず守ること。**

### 1. セッション開始時の確認

実装に入る前に、以下を確認する:

```
- [ ] CLAUDE.md の内容が最新か
- [ ] 前回セッションの残タスクを確認
- [ ] git ブランチと未コミット変更の確認
- [ ] シフト表の実名データがコミット対象に含まれていないか
```

### 2. 計画駆動の開発

- 3つ以上の画面・機能を実装する場合は、**依存関係を明示した計画を先に書く**
- 依存関係のない部分は並列エージェントで一括作成してよい
- Phase 分けで1セッションでの完成を目指す

### 3. 実装後の確認チェックリスト

```
- [ ] index.html をブラウザで開いて表示確認
- [ ] モバイル表示（DevTools レスポンシブモード）確認
- [ ] サンプルデータで全画面の操作確認
- [ ] 実名データが一切含まれていないことの確認
- [ ] Cloudflare Pages へのデプロイテスト
```

### 4. CLAUDE.md とセッションログの更新タイミング

- **機能実装が一段落したら即座に更新する**（セッション終盤まで待たない）
- 長時間セッションではコンテキスト圧縮が起きるため、早めにドキュメント化
- セッションログは `docs/session-logs/YYYY-MM-DD.md`

### 5. デモデータの管理

- サンプルデータは `data/sample-shifts.json` に集約
- 実際のシフト表データの構造のみ参考にし、値はすべてダミー
- スタッフ名: 田中太郎、鈴木花子、佐藤一郎 等の一般的な名前を使用

## 実装 Phase 計画

| Phase | 内容 | 依存 |
|-------|------|------|
| 0 | 要件定義・データモデル設計 | — |
| 1 | デザイントークン（style.css）+ HTML骨格 | Phase 0 |
| 2 | スタッフ一覧画面 | Phase 1 |
| 3 | シフト自動生成画面 | Phase 1, 2 |
| 4 | シフトカレンダー画面 | Phase 1 |
| 5 | 統合テスト・レスポンシブ調整・デプロイ | Phase 2, 3, 4 |

## エージェント構成

チーム開発では以下のロール MD を参照:

| ロール | ファイル | 責務 |
|--------|---------|------|
| PdO | `docs/agents/pdo.md` | 要件定義・優先度・松竹梅プラン設計 |
| デザイナー | `docs/agents/designer.md` | デザインシステム統合・UIパターン |
| フロントエンド | `docs/agents/frontend.md` | HTML/CSS/JS 実装 |

## 参考プロジェクト

| プロジェクト | リポジトリ | 参考ポイント |
|-------------|-----------|-------------|
| MenuCraft AI | `gensou2023/sharemenu_webapp` | CLAUDE.md構造・エージェントMD・デザインシステム |
| Cursor道場 | `gensou2023/any-toolstudy-app` | 開発ルール・Phase分け実装・セッションログ |
